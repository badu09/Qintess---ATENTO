@isTest
private class TestBOTarifa {

	static testMethod void myUnitTest() {
    	String tabelaDominioJson = '[{"Codigo_Identificador__c":14,"Descricao__c":"Recisão Contratual","Identificador__c":"FeeCode","PK_Atento__c":5},{"Codigo_Identificador__c":20,"Descricao__c":"Disponibilização Antecipada","Identificador__c":"FeeCode","PK_Atento__c":21},{"Codigo_Identificador__c":202,"Descricao__c":"Alelo Natal Alimentação","Identificador__c":"ProductCode"},{"Codigo_Identificador__c":18,"Descricao__c":"Tarifa de Renovação","Identificador__c":"FeeCode"},{"Codigo_Identificador__c":9,"Descricao__c":"Reemissão de Senha","Identificador__c":"FeeCode","PK_Atento__c":14},{"Codigo_Identificador__c":19,"Descricao__c":"Bonificação","Identificador__c":"FeeCode","PK_Atento__c":20},{"Codigo_Identificador__c":8,"Descricao__c":"Reemissão Emergencial de Cartão","Identificador__c":"FeeCode","PK_Atento__c":13},{"Codigo_Identificador__c":2,"Descricao__c":"Cortesia","Identificador__c":"ContractType","Identificador_Dominio__c":"COURTESY"},{"Codigo_Identificador__c":16,"Descricao__c":"Tarifa Personalizada","Identificador__c":"FeeCode","PK_Atento__c":19},{"Codigo_Identificador__c":23,"Descricao__c":"Tarifa Volume Mensal sobre RNF (%)","Identificador__c":"FeeCode","PK_Atento__c":24},{"Codigo_Identificador__c":13,"Descricao__c":"Cobrança Bancária","Identificador__c":"FeeCode","PK_Atento__c":16},{"Codigo_Identificador__c":22,"Descricao__c":"Tarifa Fixa Mensal sobre RNF","Identificador__c":"FeeCode","PK_Atento__c":23},{"Codigo_Identificador__c":3,"Descricao__c":"(%) Comissão de Administração","Identificador__c":"FeeCode","PK_Atento__c":3},{"Descricao__c":"Tarifa de Gerenciamento cartão eletrônico","Identificador__c":"FeeCode","PK_Atento__c":9},{"Descricao__c":"Tarifa de atendimento por unidade","Identificador__c":"FeeCode","PK_Atento__c":10},{"Codigo_Identificador__c":302,"Descricao__c":"Não Identificado","Identificador__c":"ProductCode"},{"Descricao__c":"Cartão Departamento","Identificador__c":"FeeCode","PK_Atento__c":6},{"Codigo_Identificador__c":400,"Descricao__c":"Cultura","Identificador__c":"ProductCode"},{"Descricao__c":"Taxa de Serviço","Identificador__c":"FeeCode","PK_Atento__c":8},{"Codigo_Identificador__c":10,"Descricao__c":"Emissão de Extrato","Identificador__c":"FeeCode","PK_Atento__c":15},{"Codigo_Identificador__c":15,"Descricao__c":"Tarifa de Inatividade","Identificador__c":"FeeCode","PK_Atento__c":17},{"Codigo_Identificador__c":1,"Descricao__c":"Boas Vindas","Identificador__c":"ContractType","Identificador_Dominio__c":"WELCOMES"},{"Codigo_Identificador__c":300,"Descricao__c":"FLEX CAR","Identificador__c":"ProductCode"},{"Codigo_Identificador__c":2,"Descricao__c":"Manutenção Mensal","Identificador__c":"FeeCode","PK_Atento__c":2},{"Codigo_Identificador__c":24,"Descricao__c":"Emissão de Cartão Estoque","Identificador__c":"FeeCode","PK_Atento__c":25},{"Codigo_Identificador__c":1,"Descricao__c":"Entrega","Identificador__c":"FeeCode","PK_Atento__c":11},{"Codigo_Identificador__c":6,"Descricao__c":"Emissão emergencial do Cartão","Identificador__c":"FeeCode","PK_Atento__c":12},{"Codigo_Identificador__c":301,"Descricao__c":"AUTO","Identificador__c":"ProductCode"},{"Codigo_Identificador__c":0,"Descricao__c":"Padrão","Identificador__c":"ContractType","Identificador_Dominio__c":"DEFAULT"},{"Codigo_Identificador__c":5,"Descricao__c":"Emissão de Cartão","Identificador__c":"FeeCode","PK_Atento__c":7},{"Codigo_Identificador__c":200,"Descricao__c":"Alelo Alimentação","Identificador__c":"ProductCode"},{"Codigo_Identificador__c":7,"Descricao__c":"Reemissão de Cartão","Identificador__c":"FeeCode","PK_Atento__c":4},{"Codigo_Identificador__c":201,"Descricao__c":"Alelo Cesta Alimentação","Identificador__c":"ProductCode"},{"Codigo_Identificador__c":4,"Descricao__c":"Disponibilização do Benefício","Identificador__c":"FeeCode","PK_Atento__c":1},{"Codigo_Identificador__c":21,"Descricao__c":"Entrega Emergencial","Identificador__c":"FeeCode","PK_Atento__c":22},{"Codigo_Identificador__c":17,"Descricao__c":"Tarifa Mensal","Identificador__c":"FeeCode","PK_Atento__c":18},{"Codigo_Identificador__c":100,"Descricao__c":"Alelo Refeição","Identificador__c":"ProductCode"}]';
    	List<Dominio__c> dominioList = (List<Dominio__c>) JSON.deserialize(tabelaDominioJson, List<Dominio__c>.class);
    	insert dominioList;
		Test.startTest();
		Map<String, String> mapMock = new Map<String, String>();
		mapMock.put('acessarGetPricePolicyIS', '<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/"><S:Body><ns2:acessarGetPricePolicyISResponse xmlns:ns2="http://impl.middleware.alelo.atento.com.br/"><return><pricePolicyList><averageBenefit>89.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>5.25</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>99.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>5.25</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>109.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>5.25</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>119.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>4.63</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>139.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>4.63</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>159.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>4.42</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>189.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>4.42</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>199.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>4.42</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>219.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>4.42</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>239.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>4.42</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>259.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>4.01</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>279.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>4.01</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>299.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>3.8</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>319.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>3.59</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>339.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>3.41</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>359.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>3.41</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>379.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>3.22</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>399.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>3.22</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>429.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>3.02</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>459.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>3.02</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>489.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>2.83</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>509.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>2.63</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>559.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>2.63</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>609.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>2.63</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>659.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>2.43</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>759.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>2.14</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>10000</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>2.14</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>1</quantityFrom><quantityTo>5</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>89.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>4.41</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>6</quantityFrom><quantityTo>10</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><pricePolicyList><averageBenefit>99.99</averageBenefit><contractType>DEFAULT</contractType><feeCode>2</feeCode><maxValue>100</maxValue><minValue>4.41</minValue><paymentDueDays>0</paymentDueDays><paymentType>PREPAID</paymentType><productCode>100</productCode><quantityFrom>6</quantityFrom><quantityTo>10</quantityTo><saleChannelCode>BANK_AGENCY</saleChannelCode><validFrom>2016-04-20T00:00:00-03:00</validFrom><valueType>VALUE</valueType></pricePolicyList><responseData><clrs>ATENTO,5,PAT,1925,1,2016-10-06 18:14:26.893742</clrs><communicationData><channel>PAT</channel><institution>ATENTO</institution><product>1</product><usn>1925</usn></communicationData><success>true</success></responseData></return></ns2:acessarGetPricePolicyISResponse></S:Body></S:Envelope>');
		HttpAcessoExternoMock mock = new HttpAcessoExternoMock(100, '', '', new Map<String, String>());
		mock.setMocks(mapMock);
		Test.setMock(HttpCalloutMock.class, mock);
		//System.enqueueJob(new QueueCarregarTarifas(JSON.serialize(BOTarifa.carregarTarifas())));
		Test.stopTest();
	}
}